<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>School MS — User Flow Documentation</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Manrope:wght@600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>

    <aside class="sidebar" id="sidebar"></aside>
    <div class="main">
        <div class="topbar" id="topbar"></div>
        <div class="content" id="content"></div>
    </div>

    <script>
        const data = {
            roles: [
                {
                    id: "management", title: "Dean / Management", icon: "⬡",
                    subtitle: "School owner and strategic controller",
                    overview: ["Register School", "Manage Branches", "Manage Principal", "Subscription Control", "Analytics", "Deactivate School"],
                    flows: [{
                        title: "School Lifecycle Management", steps: [
                            { title: "Register School", tag: "CREATE", desc: "Create a new school profile and configure initial settings.", actions: ["Enter school name", "Add address & contact details", "Upload school logo", "Submit registration", "Receive confirmation email"] },
                            { title: "Update School Details", tag: "UPDATE", desc: "Modify existing school profile information.", actions: ["Edit school profile", "Update contact info", "Change branding / logo", "Save changes"] },
                            { title: "Manage Branches", tag: "CRUD", desc: "Create and control multiple school branches.", actions: ["Create branch with address", "Assign branch principal", "Edit branch details", "Activate / deactivate branch", "View branch analytics"] },
                            { title: "Manage Principal Accounts", tag: "CRUD", desc: "Control principal accounts and permissions.", actions: ["Create principal account", "Assign branch to principal", "Set role permissions", "Reset password", "Suspend / reactivate account", "Remove principal"] },
                            { title: "Subscription Control", tag: "PROCESS", desc: "Manage billing, plans, and active features.", actions: ["View current plan", "Upgrade / downgrade plan", "Manage payment method", "View invoice history", "Enable / disable features", "Set renewal alerts"] },
                            { title: "Analytics & Reports", tag: "READ", desc: "Review school-wide performance data.", actions: ["View enrollment stats", "Compare branch performance", "Export CSV / PDF", "View fee collection summary", "Monitor teacher-student ratios"] },
                            { title: "Deactivate / Archive School", tag: "DELETE", desc: "Safely disable and archive the school system.", actions: ["Backup all school data", "Deactivate subscription", "Archive school record", "Restore if needed"] }
                        ]
                    }]
                },
                {
                    id: "principal", title: "Principal", icon: "◈",
                    subtitle: "School administrator and academic head",
                    overview: ["Academic Year", "Classes", "Teachers", "Students", "Subjects", "Promotion", "Reports"],
                    flows: [{
                        title: "Academic Control Flow", steps: [
                            { title: "Manage Academic Year", tag: "CRUD", desc: "Define and control academic sessions and terms.", actions: ["Create academic year with date range", "Edit start / end dates", "Set term / semester structure", "Activate year", "Deactivate / archive year"] },
                            { title: "Manage Classes & Sections", tag: "CRUD", desc: "Setup and maintain class structure.", actions: ["Create class (Grade 1, 2…)", "Add sections (A, B, C…)", "Set class capacity", "Assign class teacher", "Update class info", "Delete empty class"] },
                            { title: "Manage Teachers", tag: "CRUD", desc: "Onboard and manage teacher accounts.", actions: ["Create teacher account", "Assign subjects & classes", "Set teaching schedule", "Edit profile", "Deactivate teacher", "View performance"] },
                            { title: "Manage Students", tag: "CRUD", desc: "Control all student records and status.", actions: ["Approve admission requests", "Update student details", "Assign class & section", "Transfer student", "Suspend student", "Remove student record"] },
                            { title: "Subject & Syllabus Management", tag: "CRUD", desc: "Define curriculum and syllabus structure.", actions: ["Create subjects", "Link subjects to classes", "Upload syllabus documents", "Edit syllabus", "Set subject weightage"] },
                            { title: "Timetable Management", tag: "CRUD", desc: "Build and manage class schedules.", actions: ["Create class timetable", "Add subject slots", "Assign teacher to slot", "Edit subject timing", "Handle teacher substitutions", "Publish timetable", "Delete timetable"] },
                            { title: "Staff Management / accountant / admin", tag: "CRUD", desc: "Maintain records for all staff members.", actions: ["Add new staff member", "Edit staff profile", "Assign department & designation", "Upload staff documents", "Mark staff attendance", "Deactivate staff account"] },
                            // { title: "Promote Students", tag: "PROCESS", desc: "Execute year-end promotion workflow.", actions: ["Select academic year","Set promotion criteria","Preview promotion results","Bulk promote eligible students","Hold / fail students manually","Archive previous year data"] },
                            { title: "Generate School Reports", tag: "READ", desc: "Review and export school-wide reports.", actions: ["View attendance summary", "View exam result overview", "Export class-wise reports", "View teacher workload report", "Download annual report"] }
                        ]
                    }]
                },
                {
                    id: "admin", title: "School Admin / Admissions Officer", icon: "◆",
                    subtitle: "Operational manager",
                    overview: ["Admissions", "Fee Management", "Staff Records", "Timetable", "Transport", "Inventory", "Notices"],
                    flows: [{
                        title: "Operations Management", steps: [
                            { title: "Student Admission", tag: "CRUD", desc: "Handle complete student admission lifecycle.", actions: ["Create admission application", "Upload required documents", "Review application", "Edit student details", "Assign roll number & class", "Generate admission letter", "Delete rejected application"] },
                            { title: "Manage Students", tag: "CRUD", desc: "Control all student records and status.", actions: ["Approve admission requests", "Update student details", "Assign class & section", "Transfer student", "Suspend student", "Remove student record"] },
                            { title: "Fee Management / Account", tag: "CRUD", desc: "Manage fee structures and track payments.", actions: ["Create fee structure", "Assign fees to classes", "Record fee payment", "Generate fee receipt", "Apply discounts / scholarships", "Send payment reminders", "View outstanding dues"] },
                            { title: "Staff Management", tag: "CRUD", desc: "Maintain records for all staff members.", actions: ["Add new staff member", "Edit staff profile", "Assign department & designation", "Upload staff documents", "Mark staff attendance", "Deactivate staff account"] },
                            { title: "Timetable Management", tag: "CRUD", desc: "Build and manage class schedules.", actions: ["Create class timetable", "Add subject slots", "Assign teacher to slot", "Edit subject timing", "Handle teacher substitutions", "Publish timetable", "Delete timetable"] },
                            { title: "Transport Management", tag: "CRUD", desc: "Oversee school transport and routes.", actions: ["Add vehicle details", "Assign driver & conductor", "Define routes & stops", "Assign students to routes", "Update route info", "Track vehicle status", "Remove vehicle"] },
                            { title: "Inventory Management", tag: "CRUD", desc: "Track and manage school assets.", actions: ["Add inventory items", "Categorise items", "Update stock count", "Issue items to departments", "Record damaged / lost items", "Generate inventory report"] },
                            { title: "Notice & Communication", tag: "CRUD", desc: "Publish and manage school-wide notices.", actions: ["Create notice / circular", "Target by role or class", "Schedule delivery", "Edit notice", "Delete notice", "View read receipts"] }
                        ]
                    }]
                },
                {
                    id: "teacher", title: "Teacher", icon: "◉",
                    subtitle: "Academic delivery and evaluation",
                    overview: ["Attendance", "Lesson Plans", "Assignments", "Exams", "Marks", "Student Reports"],
                    flows: [{
                        title: "Teaching Lifecycle", steps: [
                            { title: "Attendance Management", tag: "CRUD", desc: "Record and manage daily student attendance.", actions: ["Select class & date", "Mark present / absent / late", "Add attendance remarks", "Edit attendance record", "View monthly summary", "Delete incorrect record", "Export attendance report"] },
                            // { title: "Lesson Plan Management", tag: "CRUD", desc: "Plan and track teaching content delivery.", actions: ["Create lesson plan", "Map to syllabus topics", "Set weekly schedule", "Upload supporting resources", "Mark topic as covered", "Edit plan", "Delete plan"] },
                            { title: "Assignment Management", tag: "CRUD", desc: "Create, distribute, and grade assignments.", actions: ["Create assignment with instructions", "Set submission deadline", "Upload reference files", "Edit assignment", "View student submissions", "Grade submission", "Delete assignment"] },
                            { title: "Exam Management", tag: "CRUD", desc: "Setup and schedule examinations.", actions: ["Create exam (unit test / term / annual)", "Set exam date, time & duration", "Define syllabus coverage", "Upload question paper", "Edit exam details", "Publish schedule", "Delete exam"] },
                            { title: "Marks Entry & Results", tag: "CRUD", desc: "Record, verify, and publish student results.", actions: ["Enter marks per student", "Validate against max marks", "Update incorrect marks", "Calculate percentage & grade", "Publish results", "Generate mark sheet", "Delete incorrect entry"] },
                            { title: "Student Performance Review", tag: "READ", desc: "Analyse academic progress and share feedback.", actions: ["View student-wise analytics", "Identify low performers", "Compare term performance", "Generate performance report", "Send feedback to parent", "Export result summary"] }
                        ]
                    }]
                },
                {
                    id: "student", title: "Student", icon: "◎",
                    subtitle: "Learner and participant",
                    overview: ["Attendance", "Assignments", "Exams", "Results", "Notices", "Profile"],
                    flows: [{
                        title: "Student Academic Journey", steps: [
                            { title: "Profile Management", tag: "UPDATE", desc: "Manage personal account and contact details.", actions: ["View profile & class details", "Edit contact information", "Upload profile photo", "Change password", "View enrolled subjects"] },
                            { title: "View Attendance", tag: "READ", desc: "Track personal attendance records.", actions: ["View daily attendance", "Check monthly attendance %", "Download attendance report", "Request attendance correction"] },
                            { title: "Assignment Submission", tag: "CRUD", desc: "Access and submit homework assignments.", actions: ["View assigned homework", "Download assignment instructions", "Upload answer file", "Resubmit before deadline", "View submission status", "Check graded feedback"] },
                            { title: "Exam & Results", tag: "READ", desc: "Access exam schedules and published results.", actions: ["View upcoming exam schedule", "Download admit card", "Check published marks", "View grade report card", "Download mark sheet"] },
                            { title: "Notices & Communication", tag: "READ", desc: "View school communications and events.", actions: ["View school notices", "Read teacher messages", "Reply to messages", "View event calendar"] }
                        ]
                    }]
                },
                {
                    id: "parent", title: "Parent / Guardian", icon: "◍",
                    subtitle: "Guardian and academic monitor",
                    overview: ["Attendance Monitoring", "Performance Tracking", "Fee Payments", "Communication", "Profile"],
                    flows: [{
                        title: "Parent Control Flow", steps: [
                            { title: "Monitor Child Attendance", tag: "READ", desc: "Track ward's daily school attendance.", actions: ["View attendance calendar", "Check attendance percentage", "Receive absence alerts", "Download attendance report"] },
                            { title: "Monitor Academic Performance", tag: "READ", desc: "Review child's results and progress.", actions: ["View exam results", "Download report card", "Compare term-wise performance", "View assignment submission status", "Check marks per subject"] },
                            { title: "Fee Payment & History", tag: "PROCESS", desc: "Manage tuition fee payments and records.", actions: ["View fee structure", "Check outstanding dues", "Pay fees online", "Download payment receipt", "View payment history"] },
                            { title: "Communication with School", tag: "CRUD", desc: "Interact with teachers and administration.", actions: ["Send message to teacher", "Reply to notifications", "Schedule parent-teacher meeting", "View school notices", "Receive emergency alerts"] },
                            { title: "Profile Management", tag: "UPDATE", desc: "Manage guardian account details.", actions: ["View linked child profiles", "Edit contact information", "Change password", "Update emergency contact", "Enable / disable notifications"] }
                        ]
                    }]
                },
                {
                    id: "non_teaching", title: "Non-Teaching Staff", icon: "◑",
                    subtitle: "Support operations and administration",
                    overview: ["Attendance", "Leave Requests", "Duties", "Inventory", "Notices", "Profile"],
                    flows: [{
                        title: "Support Staff Lifecycle", steps: [
                            { title: "Profile Management", tag: "UPDATE", desc: "Manage personal account and documents.", actions: ["View personal profile", "Edit contact details", "Upload documents", "Change password", "View assigned department"] },
                            // { title: "Attendance Management", tag: "READ", desc: "Track own attendance records.", actions: ["View daily attendance record", "Check monthly attendance summary", "Download attendance report", "Request attendance correction"] },
                            // { title: "Leave Management", tag: "CRUD", desc: "Apply and manage leave requests.", actions: ["Apply for leave", "Select leave type (sick / casual / earned)", "Upload supporting document", "View leave status", "Cancel pending request", "View leave balance"] },
                            { title: "Duty & Task Management", tag: "READ", desc: "View and manage assigned duties.", actions: ["View daily assigned tasks", "Mark task as completed", "View duty schedule", "Receive duty change notifications"] },
                            // { title: "Inventory Handling", tag: "PROCESS", desc: "Assist with stock and asset management.", actions: ["View assigned inventory items", "Record usage / issue of items", "Report damaged items", "Request new stock", "Confirm received deliveries"] },
                            // { title: "Notice & Communication", tag: "READ", desc: "Stay informed with school communications.", actions: ["View school notices", "Read departmental messages", "Acknowledge circulars", "View event calendar"] }
                        ]
                    }]
                }
            ]
        };

        let active = data.roles[0];

        const tagClass = { CRUD: 't-crud', CREATE: 't-create', UPDATE: 't-update', READ: 't-read', PROCESS: 't-process', DELETE: 't-delete' };
        const legendColors = { CRUD: '#6d28d9', CREATE: '#15803d', UPDATE: '#1d4ed8', READ: '#a16207', PROCESS: '#c2410c', DELETE: '#b91c1c' };

        function renderSidebar() {
            document.getElementById('sidebar').innerHTML = `
    <div class="sidebar-top">
      <div class="brand-eyebrow">User Flow Docs</div>
      <div class="brand-name">School MS</div>
      <div class="brand-tagline">Role-based System Reference</div>
    </div>
    <div class="sidebar-nav">
      <div class="nav-group-label" style="margin-bottom:10px">Roles</div>
      ${data.roles.map(r => `
        <button class="role-btn ${r.id === active.id ? 'active' : ''}" onclick="setRole('${r.id}')">
          <div class="role-icon-box">${r.icon}</div>
          <span>${r.title}</span>
          <div class="role-btn-indicator"></div>
        </button>
      `).join('')}
    </div>
  `;
        }

        function renderTopbar() {
            const r = active;
            const steps = r.flows.reduce((s, f) => s + f.steps.length, 0);
            document.getElementById('topbar').innerHTML = `
    <div class="topbar-left">
      <div class="tb-icon">${r.icon}</div>
      <div>
        <div class="tb-role">${r.title}</div>
        <div class="tb-sub">${r.subtitle}</div>
      </div>
    </div>
    <div class="tb-right">
      <div class="tb-badge">${steps} Process Steps</div>
    </div>
  `;
        }

        function renderContent() {
            const r = active;
            document.getElementById('content').innerHTML = `


    ${r.flows.map(flow => `
      <div class="flow-section">
        <div class="flow-header">
          <div class="flow-header-label">${flow.title}</div>
          <div class="flow-header-rule"></div>
        </div>
        <div class="flowchart">
          ${flow.steps.map((step, i) => `
            <div class="flow-row">
              <div class="spine">
                <div class="spine-num">${i + 1}</div>
                <div class="spine-line"></div>
              </div>
              <div class="step-card">
                <div class="card-top">
                  <div class="step-title">${step.title}</div>
                  
                </div>
                <div class="step-desc">${step.desc}</div>
                <div class="card-divider"></div>
                <div class="actions-grid">
                  ${step.actions.map(a => `
                    <div class="action-pill"><div class="action-dot"></div>${a}</div>
                  `).join('')}
                </div>
              </div>
            </div>
          `).join('')}
        </div>
      </div>
    `).join('')}
  `;
        }

        function setRole(id) {
            active = data.roles.find(r => r.id === id);
            renderSidebar(); renderTopbar(); renderContent();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        renderSidebar(); renderTopbar(); renderContent();
    </script>
</body>

</html>